<div class="schedule-page">
  <!-- Calendar Header -->
  <div class="calendar-header">
    <div class="calendar-nav">
      <button class="nav-btn today-btn" id="todayBtn" type="button">Today</button>
      <button class="nav-btn prev-btn" id="prevWeekBtn" type="button" aria-label="Previous week">
        <i class="bx bx-chevron-left"></i>
      </button>
      <button class="nav-btn next-btn" id="nextWeekBtn" type="button" aria-label="Next week">
        <i class="bx bx-chevron-right"></i>
      </button>
      <div class="current-month" id="currentMonth">December 2025</div>
    </div>
    
    <div class="calendar-actions">
      <!-- View Toggle -->
      <div class="view-toggle">
        <button class="view-toggle-btn active" id="calendarViewBtn" data-view="calendar" type="button">
          <i class="bx bx-calendar"></i>
          <span>Calendar</span>
        </button>
        <button class="view-toggle-btn" id="individualSessionsViewBtn" data-view="individual" type="button">
          <i class="bx bx-list-ul"></i>
          <span>Individual Sessions</span>
        </button>
      </div>
      
      <!-- Create Button with Dropdown -->
      <div class="create-dropdown-container">
        <button class="create-btn" id="createBtn" type="button">
          <i class="bx bx-plus"></i>
          <span>Create</span>
        </button>
        <div class="create-dropdown" id="createDropdown">
          <button class="create-option" data-location-type="on-field" type="button">
            <span>On-Field</span>
          </button>
          <button class="create-option" data-location-type="virtual" type="button">
            <span>Virtual</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Individual Session Types Section -->
  <div class="individual-sessions-section" id="individualSessionsSection" style="display: none;">
    <div class="individual-sessions-header">
      <h2>Individual Session Types</h2>
      <div class="individual-sessions-actions">
        <div class="help-tooltip-container">
          <button class="help-btn" type="button" aria-label="Help" id="helpBtn">
            <i class="bx bx-help-circle"></i>
          </button>
          <div class="help-tooltip" id="helpTooltip">
            <p><strong>How to create Individual Sessions:</strong></p>
            <ol>
              <li>Click the <strong>"Create"</strong> button in the header</li>
              <li>Select <strong>"Virtual"</strong></li>
              <li>Choose an Individual Session type:
                <ul>
                  <li>Champions Player Progress (CPP)</li>
                  <li>Psychologist</li>
                  <li>College Advising</li>
                  <li>Free Nutrition Consultation</li>
                </ul>
              </li>
              <li>Configure the session settings and save</li>
            </ol>
            <p>Once created, the session type will appear in this table.</p>
          </div>
        </div>
      </div>
    </div>
    
    <div class="individual-sessions-content">
      <div class="sessions-table-container">
        <table class="sessions-table" id="sessionsTable">
          <thead>
            <tr>
              <th class="sortable" data-sort="name">
                Name
                <i class="bx bx-sort"></i>
              </th>
              <th class="actions-column"></th>
            </tr>
          </thead>
          <tbody id="sessionsTableBody">
            <!-- Individual session types will be loaded here -->
          </tbody>
        </table>
        <div class="empty-state" id="emptyState" style="display: none;">
          <p>No individual session types created yet.</p>
          <p>Click "Create" → "Virtual" → Select an Individual Session type to get started.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Calendar Grid -->
  <div class="calendar-container" id="calendarContainer">
    <div class="calendar-grid" id="calendarGrid">
      <!-- Time column and day columns will be generated by JavaScript -->
    </div>
  </div>

  <!-- Session Details Sidebar (slides from right) -->
  <div class="session-sidebar" id="sessionSidebar">
    <div class="sidebar-header">
      <h2 id="sidebarTitle">Create Session</h2>
      <div class="sidebar-header-actions">
        <button class="sidebar-delete" id="sidebarDelete" type="button" aria-label="Delete session" style="display: none;">
          <i class="bx bx-trash"></i>
        </button>
        <button class="sidebar-close" id="sidebarClose" type="button" aria-label="Close sidebar">
          <i class="bx bx-x"></i>
        </button>
      </div>
    </div>
    
    <div class="sidebar-tabs">
      <button class="tab-btn active" data-tab="details" type="button">Details</button>
      <button class="tab-btn" data-tab="settings" type="button">Settings</button>
    </div>

    <form class="session-form" id="sessionForm">
      <!-- Details Tab -->
      <div class="tab-content active" data-tab="details">
        <div class="form-group">
          <label for="sessionType" class="required">Type</label>
          <select id="sessionType" name="sessionType" required>
            <option value="">Select type</option>
            <optgroup label="On-Field">
              <option value="Tec Tac">Tec Tac</option>
              <option value="Speed Training">Speed Training</option>
              <option value="Strength & Conditioning">Strength & Conditioning</option>
            </optgroup>
            <optgroup label="Virtual">
              <option value="Champions Player Progress (CPP)">Champions Player Progress (CPP)</option>
              <option value="Group Film-Analysis">Group Film-Analysis</option>
              <option value="Pro Player Stories (PPS)">Pro Player Stories (PPS)</option>
              <option value="College Advising">College Advising</option>
              <option value="Psychologist">Psychologist</option>
              <option value="Free Nutrition Consultation">Free Nutrition Consultation</option>
            </optgroup>
          </select>
        </div>

        <div class="form-group">
          <label for="sessionDate" class="required">Date</label>
          <input type="date" id="sessionDate" name="sessionDate" required>
        </div>

        <div class="form-group">
          <label for="sessionTime" class="required">Time</label>
          <div class="time-inputs">
            <input type="time" id="sessionStartTime" name="startTime" required>
            <i class="bx bx-right-arrow-alt"></i>
            <input type="time" id="sessionEndTime" name="endTime" required>
          </div>
        </div>

        <div class="form-group">
          <label class="required">Schedule - Set when this session occurs</label>
          <select id="repeatsSelect" name="repeats">
            <option value="once">Once</option>
            <option value="daily">Daily</option>
            <option value="weekly" selected>Every week</option>
            <option value="monthly">Monthly</option>
          </select>
          
          <div class="day-selector">
            <button type="button" class="day-btn" data-day="0">S</button>
            <button type="button" class="day-btn" data-day="1">M</button>
            <button type="button" class="day-btn" data-day="2">T</button>
            <button type="button" class="day-btn" data-day="3">W</button>
            <button type="button" class="day-btn" data-day="4">T</button>
            <button type="button" class="day-btn" data-day="5">F</button>
            <button type="button" class="day-btn" data-day="6">S</button>
          </div>
          
          <button type="button" class="repeats-forever-link" id="repeatsForeverBtn">Repeats forever</button>
        </div>

        <div class="form-group">
          <label class="required">Coaches - Assign coaches for this session</label>
          <select id="mainCoach" name="mainCoach" required>
            <option value="">— Select Coach —</option>
          </select>
          <select id="assistantCoach" name="assistantCoach">
            <option value="">— Assistant coach (optional) —</option>
          </select>
          <select id="goalkeeperCoach" name="goalkeeperCoach">
            <option value="">— Goalkeeper coach (optional) —</option>
          </select>
        </div>
      </div>

      <!-- Settings Tab -->
      <div class="tab-content" data-tab="settings">
        <div class="form-group">
          <label>Reservation settings</label>
          <p class="form-hint">Set preferences for when clients can reserve</p>
          
          <div class="form-group">
            <label for="reservationsOpen" class="required">Reservations open</label>
            <select id="reservationsOpen" name="reservationsOpen" required>
              <option value="immediately" selected>Immediately</option>
              <option value="1day">1 day before</option>
              <option value="2days">2 days before</option>
              <option value="1week">1 week before</option>
            </select>
          </div>

          <div class="form-group">
            <label for="reservationsClose" class="required">Reservations close</label>
            <select id="reservationsClose" name="reservationsClose" required>
              <option value="at-start" selected>At start time</option>
              <option value="1hour">1 hour before</option>
              <option value="2hours">2 hours before</option>
              <option value="1day">1 day before</option>
            </select>
          </div>

          <div class="form-group toggle-group">
            <label for="attendanceLimitToggle">Attendance limit</label>
            <div class="toggle-container">
              <input type="checkbox" id="attendanceLimitToggle" name="attendanceLimitToggle">
              <input type="number" id="attendanceLimit" name="attendanceLimit" value="25" min="1" disabled>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>Late cancel</label>
          <p class="form-hint">If a client cancels on short-notice, they will lose the session if they are on a limited plan or punch card</p>
          
          <div class="form-group">
            <label for="minNotice" class="required">Minimum notice to keep session</label>
            <select id="minNotice" name="minNotice" required>
              <option value="at-start" selected>At start time</option>
              <option value="1hour">1 hour before</option>
              <option value="2hours">2 hours before</option>
              <option value="1day">1 day before</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>Other settings</label>
          
          <div class="form-group" id="locationFieldGroup">
            <label for="sessionLocation">Location</label>
            <input type="text" id="sessionLocation" name="location" placeholder="— Add location —">
          </div>
          
          <div class="form-group" id="zoomFieldGroup" style="display: none;">
            <label for="sessionZoomLink">Zoom Link</label>
            <input type="url" id="sessionZoomLink" name="zoomLink" placeholder="https://zoom.us/j/...">
          </div>
          
          <div class="form-group">
            <label for="sessionDescription">Description / Session Plan</label>
            <textarea id="sessionDescription" name="description" rows="6" placeholder="Enter session description and plan..."></textarea>
          </div>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" class="btn-cancel" id="cancelBtn">Cancel</button>
        <button type="submit" class="btn-save">Save</button>
      </div>
    </form>
  </div>

  <!-- Overlay for sidebar -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- Edit Session Confirmation Modal -->
  <div class="modal-overlay" id="editSessionModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Edit Session</h3>
        <div class="modal-actions">
          <button type="button" class="modal-btn-close" id="editSessionClose">Close</button>
          <button type="button" class="modal-btn-save" id="editSessionSave">Save</button>
        </div>
      </div>
      
      <div class="modal-body">
        <div class="info-banner">
          <i class="bx bx-info-circle"></i>
          <span id="editSessionInfo">Edit only this session</span>
        </div>
        
        <div class="radio-group">
          <label class="radio-option">
            <input type="radio" name="editScope" value="this-session" checked>
            <span class="radio-label" id="thisSessionLabel">This session</span>
          </label>
          
          <label class="radio-option">
            <input type="radio" name="editScope" value="all-day-sessions">
            <div class="radio-label-container">
              <span class="radio-label" id="allDaySessionsLabel">Move this and all recurring sessions</span>
              <div class="recurring-dates-list" id="recurringDatesList" style="display: none;"></div>
            </div>
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- Repeats Forever Modal -->
  <div class="modal-overlay" id="repeatsForeverModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Class ends</h3>
        <div class="modal-actions">
          <button type="button" class="modal-btn-close" id="repeatsForeverClose">Close</button>
          <button type="button" class="modal-btn-save" id="repeatsForeverSave">Save</button>
        </div>
      </div>
      
      <div class="modal-body">
        <div class="radio-group">
          <label class="radio-option">
            <input type="radio" name="repeatsEnd" value="never" checked>
            <span class="radio-label">Never</span>
          </label>
          
          <label class="radio-option">
            <input type="radio" name="repeatsEnd" value="on-date">
            <span class="radio-label">On a date</span>
          </label>
          <div class="conditional-input" id="onDateInput" style="display: none;">
            <input type="date" id="repeatsEndDate" class="form-input">
          </div>
          
          <label class="radio-option">
            <input type="radio" name="repeatsEnd" value="after">
            <span class="radio-label">After</span>
          </label>
          <div class="conditional-input" id="afterInput" style="display: none;">
            <input type="number" id="repeatsOccurrences" class="form-input" min="1" placeholder="Number of occurrences">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

